"use strict";var h=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var x=(s,t)=>{for(var e in t)h(s,e,{get:t[e],enumerable:!0})},D=(s,t,e,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of I(t))!P.call(s,i)&&i!==e&&h(s,i,{get:()=>t[i],enumerable:!(l=A(t,i))||l.enumerable});return s};var F=s=>D(h({},"__esModule",{value:!0}),s);var E={};x(E,{default:()=>S});module.exports=F(E);var o=require("@raycast/api"),f=require("react");var g=require("@raycast/api"),k=require("path"),w=require("fs/promises"),L=require("child_process");async function j(s,...t){let e=(0,k.join)(g.environment.assetsPath,"compiled_raycast_swift/MyExecutable");return await(0,w.chmod)(e,"755"),new Promise((l,i)=>{let y=[s];for(let a of t)try{y.push(JSON.stringify(a,(c,m)=>m===void 0?null:m))}catch(c){i(new p("Failed to serialize input to JSON: "+c.message));return}let d=(0,L.spawn)(e,y),n=[],u=[];d.stdout?.on("data",a=>{n.push(a.toString())}),d.stderr?.on("data",a=>{u.push(a.toString())}),d.on("exit",a=>{if(a===0)try{let c=n.join("").trim();c.length!=0?l(JSON.parse(c)):l(null)}catch(c){let m=new p("Failed to deserialize result from JSON: "+c.message);m.stdout=n.join("").trim(),m.stderr=u.join("").trim(),i(m)}else{let c=new p(u.join("").trim()||n.join("").trim()||"Could not get any data");c.stdout=n.join("").trim(),c.stderr=u.join("").trim(),i(c)}}),d.on("error",a=>{i(a)})})}async function b(s){return await j("handler",s)}var p=class extends Error{constructor(t){super(t),this.name="SwiftError"}};var r=require("react/jsx-runtime"),v=[{display:"15 seconds",seconds:15,icon:"\u{1FAA5}"},{display:"30 seconds",seconds:30,icon:"\u{1F9FD}"},{display:"1 minute",seconds:60,icon:"\u{1F9FC}"},{display:"2 minutes",seconds:120,icon:"\u{1F6BF}"},{display:"5 minutes",seconds:300,icon:"\u{1F6C1}"},{display:"1 hour",seconds:3600,icon:"\u{1F9F9}"},{display:"24 hours",seconds:86400,icon:"\u{1FAE7}"},{display:"Forever",seconds:1/0,icon:"\u{1F92F}"}];function S(){let[s,t]=(0,f.useState)(!1),[e,l]=(0,f.useState)(null),[i,y]=(0,f.useState)(null),d=n=>{let u=new o.Toast({title:"Keyboard Locked"});b(n.seconds),l(n.seconds),y(n.icon),t(!0),u.show()};return(0,f.useEffect)(()=>{let n=setInterval(()=>{s&&e&&(l(e-1),e-1===0&&t(!1))},1e3);return()=>clearInterval(n)},[s,e]),s?(0,r.jsx)(o.List,{children:(0,r.jsx)(o.List.EmptyView,{icon:i??"\u{1F9FC}",description:"Press \u2303 + U at any time to unlock keyboard.",title:`Cleaning keyboard${e?` for ${e} seconds `:""}`,actions:(0,r.jsxs)(o.ActionPanel,{children:[(0,r.jsx)(o.Action,{title:"Back",onAction:()=>t(!1)}),(0,r.jsx)(o.Action,{autoFocus:!1,title:"Unlock Keyboard",shortcut:{modifiers:["ctrl"],key:"u"},onAction:()=>t(!1)})]})})}):(0,r.jsx)(o.List,{filtering:!1,navigationTitle:"Lock keyboard for..",children:(0,r.jsx)(o.List.Section,{title:"Durations",children:v.map(n=>(0,r.jsx)(o.List.Item,{title:`Lock Keyboard for ${n.display}`,icon:n.icon,actions:(0,r.jsx)(o.ActionPanel,{children:(0,r.jsx)(o.Action,{title:"Lock Keyboard",icon:o.Icon.Lock,onAction:()=>d(n)})})},n.display+n.seconds))})})}
