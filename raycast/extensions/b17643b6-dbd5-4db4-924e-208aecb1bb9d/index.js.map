{
  "version": 3,
  "sources": ["../src/index.ts", "../src/utils.ts"],
  "sourcesContent": ["import { showHUD, getSelectedFinderItems, showInFinder, closeMainWindow, showToast, Toast } from \"@raycast/api\";\nimport { runBackgroundRemoval } from \"./utils\";\nimport path from \"path\";\n\nexport default async function main() {\n  try {\n    const paths = await getSelectedFinderItems();\n    if (paths.length === 0) {\n      return;\n    }\n    await showToast({\n      style: Toast.Style.Animated,\n      title: `Removing background`,\n    });\n    await runBackgroundRemoval({ paths: paths.map((item) => item.path) });\n    await showHUD(\"Removed background from image\");\n\n    const resultPaths = paths.map((item) => {\n      const extension = path.extname(item.path);\n      const basename = path.basename(item.path, extension);\n\n      return path.resolve(path.dirname(item.path), `${basename}-background-removed${extension}`);\n    });\n\n    await showInFinder(resultPaths[0]);\n    await closeMainWindow();\n  } catch (error) {\n    console.error(error);\n    await showToast({\n      style: Toast.Style.Failure,\n      title: `Error removing background`,\n      message: (error as Error).message,\n    });\n  }\n}\n", "import { environment } from \"@raycast/api\";\nimport { exec } from \"child_process\";\nimport { chmod } from \"fs/promises\";\nimport { join } from \"path\";\n\nexport async function runBackgroundRemoval({ paths }: { paths: string[] }) {\n  const command = join(environment.assetsPath, \"remove-background\");\n  await chmod(command, \"755\");\n  const output = await new Promise<string>((resolve, reject) => {\n    exec(`${command} ${paths.map((x) => JSON.stringify(x)).join(\" \")}`, (err, stdout, stderr) => {\n      if (err) {\n        // get stdout\n        reject(stdout + \" \" + stderr);\n      }\n      resolve(stdout);\n    });\n  });\n\n  return output;\n}\n"],
  "mappings": "0jBAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAAiG,wBCAjG,IAAAC,EAA4B,wBAC5BC,EAAqB,yBACrBC,EAAsB,uBACtBC,EAAqB,gBAErB,eAAsBC,EAAqB,CAAE,MAAAC,CAAM,EAAwB,CACzE,IAAMC,KAAU,QAAK,cAAY,WAAY,mBAAmB,EAChE,eAAM,SAAMA,EAAS,KAAK,EACX,MAAM,IAAI,QAAgB,CAACC,EAASC,IAAW,IAC5D,QAAK,GAAGF,CAAO,IAAID,EAAM,IAAKI,GAAM,KAAK,UAAUA,CAAC,CAAC,EAAE,KAAK,GAAG,CAAC,GAAI,CAACC,EAAKC,EAAQC,IAAW,CACvFF,GAEFF,EAAOG,EAAS,IAAMC,CAAM,EAE9BL,EAAQI,CAAM,CAChB,CAAC,CACH,CAAC,CAGH,CDjBA,IAAAE,EAAiB,mBAEjB,eAAOC,GAA8B,CACnC,GAAI,CACF,IAAMC,EAAQ,QAAM,0BAAuB,EAC3C,GAAIA,EAAM,SAAW,EACnB,OAEF,QAAM,aAAU,CACd,MAAO,QAAM,MAAM,SACnB,MAAO,qBACT,CAAC,EACD,MAAMC,EAAqB,CAAE,MAAOD,EAAM,IAAKE,GAASA,EAAK,IAAI,CAAE,CAAC,EACpE,QAAM,WAAQ,+BAA+B,EAE7C,IAAMC,EAAcH,EAAM,IAAKE,GAAS,CACtC,IAAME,EAAY,EAAAC,QAAK,QAAQH,EAAK,IAAI,EAClCI,EAAW,EAAAD,QAAK,SAASH,EAAK,KAAME,CAAS,EAEnD,OAAO,EAAAC,QAAK,QAAQ,EAAAA,QAAK,QAAQH,EAAK,IAAI,EAAG,GAAGI,CAAQ,sBAAsBF,CAAS,EAAE,CAC3F,CAAC,EAED,QAAM,gBAAaD,EAAY,CAAC,CAAC,EACjC,QAAM,mBAAgB,CACxB,OAASI,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnB,QAAM,aAAU,CACd,MAAO,QAAM,MAAM,QACnB,MAAO,4BACP,QAAUA,EAAgB,OAC5B,CAAC,CACH,CACF",
  "names": ["src_exports", "__export", "main", "__toCommonJS", "import_api", "import_api", "import_child_process", "import_promises", "import_path", "runBackgroundRemoval", "paths", "command", "resolve", "reject", "x", "err", "stdout", "stderr", "import_path", "main", "paths", "runBackgroundRemoval", "item", "resultPaths", "extension", "path", "basename", "error"]
}
